(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8235],{5385:function(e,n,t){"use strict";t.d(n,{i:function(){return u}});var o=t(5018),i=t(8073),r=t(7983),s=t(5479),a=t.n(s),c=t(3435),l=t(7143),d=t(5420);const u=async e=>{const n=(e?e.closest(".js-login-wrapper"):a()(document)).find("#error, .js-login__error"),t=await(0,r.jE)();if(t){let e;"tron"===(0,i.Dr)()?(await t.connect(),e=t):e=await t.getSigner();let r=await fetch("/api/users/get_verify_number",{method:"POST",headers:{"x-csrf-token":(0,o.PE)(),"content-type":"application/json"},credentials:"same-origin"}).then((e=>e.json()));if(r&&r.verify_numb){let t=y(r.verify_numb);e.signMessage(t+"").then((async t=>{await b(t,e.address,n)}),(()=>{}))}else(0,c.F8)({message:i18n.t("notification.aut_verify_numb")})}else if("true"===a()("#js-config").attr("data-is-mobile")){if((0,o.lb)()&&("tron"===(0,i.Dr)()?w():(a()(".js-bbar__buy.is-opened, .js-bbar__sell.is-opened, .js-bbar.is-opened, .js-bbar__toggle.is-opened").removeClass("is-opened"),a()(".js-modal--signup").hasClass("is-hidden")||a()(".js-modal--signup .js-modal__close").click())),"tron"!==(0,i.Dr)()){var s=await(0,r.IL)(),u=await s.enable();if(u&&u.length>1&&(f(),s=await(0,r.IL)(),u=await s.enable()),u&&1===u.length){const e=u[0];if(!window.verifyNumber){let e=await fetch("/api/users/get_verify_number",{method:"POST",headers:{"x-csrf-token":(0,o.PE)(),"content-type":"application/json"},credentials:"same-origin"}).then((e=>e.json()));e&&e.verify_numb&&(window.verifyNumber=e.verify_numb)}if(window.verifyNumber){let t=y(window.verifyNumber);setTimeout((async()=>{if(s){let o=await s.request({method:"personal_sign",params:[e,(0,l.hexlify)((0,d.YW)(t))]});o&&await b(o,e,n)}}),300)}else(0,c.F8)({message:i18n.t("notification.aut_verify_numb")})}else console.log("accounts",u)}}else(0,c.F8)({message:i18n.t("notification.no_provider")})},f=()=>{["-walletlink:https://www.walletlink.org:Addresses","-walletlink:https://www.walletlink.org:DefaultChainId","-walletlink:https://www.walletlink.org:DefaultJsonRpcUrl","-walletlink:https://www.walletlink.org:EIP6963ProviderUUID","-walletlink:https://www.walletlink.org:IsStandaloneSigning","-walletlink:https://www.walletlink.org:session:id","-walletlink:https://www.walletlink.org:session:linked","-walletlink:https://www.walletlink.org:session:secret","-walletlink:https://www.walletlink.org:version","WALLETCONNECT_DEEPLINK_CHOICE","wc@2:client:0.3//proposal","wc@2:client:0.3//session","wc@2:core:0.3//expirer","wc@2:core:0.3//history","wc@2:core:0.3//keychain","wc@2:core:0.3//messages","wc@2:core:0.3//pairing","wc@2:core:0.3//subscription","wc@2:ethereum_provider:/chainId","wc@2:universal_provider:/namespaces","wc@2:universal_provider:/optionalNamespaces"].forEach((e=>{try{localStorage.removeItem(e)}catch(n){}}))};function g(){document.hidden||(document.removeEventListener("visibilitychange",g),setTimeout((()=>{p(5)}),2e3))}const w=async()=>{let e=await fetch("/api/tronlinks/gen_login",{method:"POST",headers:{"x-csrf-token":(0,o.PE)(),"content-type":"application/json"},body:JSON.stringify({url:window.location.pathname}),credentials:"same-origin"}).then((e=>e.json()));if(e&&e.success&&e.actionId){const n=JSON.stringify({url:window.location.href,callbackUrl:`${window.location.origin}/api/tronlinks/callback_login`,dappIcon:`${window.location.origin}/assets/favicon/favicon-512x512-f6a7055fd01f225f7bd4fe49fa3547a267654c11db0047b8bdecfa0e58ec1ce3.png`,dappName:"Photon Tron",protocol:"TronLink",version:"1.0",chainId:"0x2b6653dc",action:"login",actionId:`${e.actionId}`});a()(".js-tronlink-modal").removeClass("is-hidden"),document.addEventListener("visibilitychange",g),window.location.href=`tronlinkoutside://pull.activity?param=${encodeURIComponent(n)}`}else(0,c.F8)({message:"Something went wrong, please reload the page and try again."})};async function p(e){if(e>=0){let n=await fetch("/api/tronlinks/get_wallet",{method:"POST",headers:{"x-csrf-token":(0,o.PE)(),"content-type":"application/json"},body:JSON.stringify({}),credentials:"same-origin"}).then((e=>e.json()));n.success&&n.wallet?(a()(".js-spinner").addClass("is-hidden"),a()(".js-tronlink-modal .js-body-text").text(`Verify wallet ownership of (${n.wallet}) and login securely to your Photon account`),a()(".js-tronlink-modal .js-body-btn").removeClass("is-hidden")):setTimeout((()=>{p(e-1)}),1500)}else console.log("FAILED ALL ATTEMPTS"),a()(".js-tronlink-modal .js-body-text").text("Failed signup attempt, please reload the page and try again.")}async function h(e){if(e>=0){let n=await fetch("/api/tronlinks/check_signature",{method:"POST",headers:{"x-csrf-token":(0,o.PE)(),"content-type":"application/json"},body:JSON.stringify({}),credentials:"same-origin"}).then((e=>e.json()));n&&n.success?((0,c.ag)({message:"Successfully signed in!"}),setTimeout((()=>{window.location=(0,o.Xq)({url:"/signup/welcome"})}),1e3)):setTimeout((()=>{h(e-1)}),2e3)}else console.log("FAILED ALL ATTEMPTS on sig!"),a()(".js-tronlink-modal .js-body-text").text("Failed signup attempt, please reload the page and try again."),a()(".js-spinner").addClass("is-hidden")}function m(){document.hidden||(document.removeEventListener("visibilitychange",m),setTimeout((()=>{h(5)}),2e3))}a()(".js-tronlink-sign-msg").on("click",(async e=>{let n=await fetch("/api/tronlinks/gen_signmsg",{method:"POST",headers:{"x-csrf-token":(0,o.PE)(),"content-type":"application/json"},body:JSON.stringify({url:window.location.pathname}),credentials:"same-origin"}).then((e=>e.json()));if(n&&n.success&&n.actionId&&n.verify_numb&&n.wallet){const e=JSON.stringify({url:window.location.href,callbackUrl:`${window.location.origin}/api/tronlinks/callback_signmsg`,dappIcon:`${window.location.origin}/assets/favicon/favicon-512x512-f6a7055fd01f225f7bd4fe49fa3547a267654c11db0047b8bdecfa0e58ec1ce3.png`,dappName:"Photon Tron",protocol:"TronLink",version:"1.0",chainId:"0x2b6653dc",loginAddress:`${n.wallet}`,signType:"signStr",message:y(n.verify_numb),action:"sign",actionId:n.actionId});document.addEventListener("visibilitychange",m),a()(".js-spinner").removeClass("is-hidden"),a()(".js-tronlink-modal .js-body-text").text("Awaiting response from TronLink"),a()(".js-tronlink-modal .js-body-btn").addClass("is-hidden"),window.location.href=`tronlinkoutside://pull.activity?param=${encodeURIComponent(e)}`}}));const y=e=>i18n.t("verify_msg",{number:e}),b=async(e,n,t)=>{if(n){const i=await fetch("/api/users/auth",{method:"POST",headers:{"x-csrf-token":(0,o.PE)(),"content-type":"application/json"},body:JSON.stringify({sig:e,signed_wallet:n,locale:i18n._locale}),credentials:"same-origin"}).then((e=>e.json()));if(i&&i.success)window.location=(0,o.Xq)({url:"/signup/welcome"});else{let e=i18n.t("notification.error");i.msg&&(e=i.msg),t.html(e),(0,c.F8)({message:e})}}else(0,c.F8)({message:i18n.t("notification.no_signer")})};a()(document).off("change",".js-connect-terms").on("change",".js-connect-terms",(function(){a()(this).is(":checked")?a()(".js-connect-terms").prop("checked",!0):a()(".js-connect-terms").removeAttr("checked")})),a()(document).off("click",".js-login__btn").on("click",".js-login__btn",(async function(e){const n=a()(".js-connect-terms");if(n.length&&!n.is(":checked"))return(0,c.F8)({message:i18n.t("notification.accept_terms")}),void(void 0!==a()(this).data("scrollToTop")&&(0,o.s2)({selector:"body"}));u(a()(this))})),(0,o.lb)()||("tron"===(0,i.Dr)()?window.tronLink:window.ethereum)||(a()(".js-login__btn, .js-login-wrapper .js-share__connect").remove(),a()(".js-signup__install").removeClass("u-d-none"))},3236:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.version=void 0,n.version="6.6.7"},7143:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.zeroPadBytes=n.zeroPadValue=n.stripZerosLeft=n.dataSlice=n.dataLength=n.concat=n.hexlify=n.isBytesLike=n.isHexString=n.getBytesCopy=n.getBytes=void 0;const o=t(3244);function i(e,n,t){if(e instanceof Uint8Array)return t?new Uint8Array(e):e;if("string"===typeof e&&e.match(/^0x([0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((e.length-2)/2);let t=2;for(let o=0;o<n.length;o++)n[o]=parseInt(e.substring(t,t+2),16),t+=2;return n}(0,o.assertArgument)(!1,"invalid BytesLike value",n||"value",e)}function r(e,n){return i(e,n,!1)}function s(e,n){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(("number"!==typeof n||e.length===2+2*n)&&(!0!==n||e.length%2===0))}n.getBytes=r,n.getBytesCopy=function(e,n){return i(e,n,!0)},n.isHexString=s,n.isBytesLike=function(e){return s(e,!0)||e instanceof Uint8Array};const a="0123456789abcdef";function c(e){const n=r(e);let t="0x";for(let o=0;o<n.length;o++){const e=n[o];t+=a[(240&e)>>4]+a[15&e]}return t}function l(e,n,t){const i=r(e);(0,o.assert)(n>=i.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(i),length:n,offset:n+1});const s=new Uint8Array(n);return s.fill(0),t?s.set(i,n-i.length):s.set(i,0),c(s)}n.hexlify=c,n.concat=function(e){return"0x"+e.map((e=>c(e).substring(2))).join("")},n.dataLength=function(e){return s(e,!0)?(e.length-2)/2:r(e).length},n.dataSlice=function(e,n,t){const i=r(e);return null!=t&&t>i.length&&(0,o.assert)(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:i,length:i.length,offset:t}),c(i.slice(null==n?0:n,null==t?i.length:t))},n.stripZerosLeft=function(e){let n=c(e).substring(2);for(;n.startsWith("00");)n=n.substring(2);return"0x"+n},n.zeroPadValue=function(e,n){return l(e,n,!0)},n.zeroPadBytes=function(e,n){return l(e,n,!1)}},3244:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.assertPrivate=n.assertNormalize=n.assertArgumentCount=n.assertArgument=n.assert=n.makeError=n.isCallException=n.isError=void 0;const o=t(3236),i=t(3606);function r(e){if(null==e)return"null";if(Array.isArray(e))return"[ "+e.map(r).join(", ")+" ]";if(e instanceof Uint8Array){const n="0123456789abcdef";let t="0x";for(let o=0;o<e.length;o++)t+=n[e[o]>>4],t+=n[15&e[o]];return t}if("object"===typeof e&&"function"===typeof e.toJSON)return r(e.toJSON());switch(typeof e){case"boolean":case"symbol":case"number":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{const n=Object.keys(e);return n.sort(),"{ "+n.map((n=>`${r(n)}: ${r(e[n])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function s(e,n){return e&&e.code===n}function a(e,n,t){{const i=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${r(t)}`);for(const e in t){const n=t[e];i.push(e+"="+r(n))}}i.push(`code=${n}`),i.push(`version=${o.version}`),i.length&&(e+=" ("+i.join(", ")+")")}let s;switch(n){case"INVALID_ARGUMENT":s=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(e);break;default:s=new Error(e)}return(0,i.defineProperties)(s,{code:n}),t&&Object.assign(s,t),s}function c(e,n,t,o){if(!e)throw a(n,t,o)}n.isError=s,n.isCallException=function(e){return s(e,"CALL_EXCEPTION")},n.makeError=a,n.assert=c,n.assertArgument=function(e,n,t,o){c(e,n,"INVALID_ARGUMENT",{argument:t,value:o})},n.assertArgumentCount=function(e,n,t){null==t&&(t=""),t&&(t=": "+t),c(e>=n,"missing arguemnt"+t,"MISSING_ARGUMENT",{count:e,expectedCount:n}),c(e<=n,"too many arguemnts"+t,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:n})};const l=["NFD","NFC","NFKD","NFKC"].reduce(((e,n)=>{try{if("test"!=="test".normalize(n))throw new Error("bad");if("NFD"===n){const e=String.fromCharCode(233).normalize("NFD");if(e!==String.fromCharCode(101,769))throw new Error("broken")}e.push(n)}catch(t){}return e}),[]);n.assertNormalize=function(e){c(l.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})},n.assertPrivate=function(e,n,t){if(null==t&&(t=""),e!==n){let e=t,n="new";t&&(e+=".",n+=" "+t),c(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:n})}}},3606:function(e,n){"use strict";function t(e,n,t){const o=n.split("|").map((e=>e.trim()));for(let r=0;r<o.length;r++)switch(n){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===n)return}const i=new Error(`invalid value for type ${n}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=e,i}Object.defineProperty(n,"__esModule",{value:!0}),n.defineProperties=n.resolveProperties=void 0,n.resolveProperties=async function(e){const n=Object.keys(e);return(await Promise.all(n.map((n=>Promise.resolve(e[n]))))).reduce(((e,t,o)=>(e[n[o]]=t,e)),{})},n.defineProperties=function(e,n,o){for(let i in n){let r=n[i];const s=o?o[i]:null;s&&t(r,s,i),Object.defineProperty(e,i,{enumerable:!0,value:r,writable:!1})}}},5420:function(e,n,t){"use strict";n.YW=n.d5=void 0;const o=t(7143),i=t(3244);function r(e,n,t,o,i){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let o=n+1;o<t.length&&t[o]>>6===2;o++)e++;return e}return"OVERRUN"===e?t.length-n-1:0}function s(e,t){null==t&&(t=n.d5.error);const i=(0,o.getBytes)(e,"bytes"),r=[];let s=0;for(;s<i.length;){const e=i[s++];if(e>>7===0){r.push(e);continue}let n=null,o=null;if(192===(224&e))n=1,o=127;else if(224===(240&e))n=2,o=2047;else{if(240!==(248&e)){s+=t(128===(192&e)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",s-1,i,r);continue}n=3,o=65535}if(s-1+n>=i.length){s+=t("OVERRUN",s-1,i,r);continue}let a=e&(1<<8-n-1)-1;for(let c=0;c<n;c++){let e=i[s];if(128!=(192&e)){s+=t("MISSING_CONTINUE",s,i,r),a=null;break}a=a<<6|63&e,s++}null!==a&&(a>1114111?s+=t("OUT_OF_RANGE",s-1-n,i,r,a):a>=55296&&a<=57343?s+=t("UTF16_SURROGATE",s-1-n,i,r,a):a<=o?s+=t("OVERLONG",s-1-n,i,r,a):r.push(a))}return r}function a(e,n){null!=n&&((0,i.assertNormalize)(n),e=e.normalize(n));let t=[];for(let o=0;o<e.length;o++){const n=e.charCodeAt(o);if(n<128)t.push(n);else if(n<2048)t.push(n>>6|192),t.push(63&n|128);else if(55296==(64512&n)){o++;const r=e.charCodeAt(o);(0,i.assertArgument)(o<e.length&&56320===(64512&r),"invalid surrogate pair","str",e);const s=65536+((1023&n)<<10)+(1023&r);t.push(s>>18|240),t.push(s>>12&63|128),t.push(s>>6&63|128),t.push(63&s|128)}else t.push(n>>12|224),t.push(n>>6&63|128),t.push(63&n|128)}return new Uint8Array(t)}n.d5=Object.freeze({error:function(e,n,t,o,r){(0,i.assertArgument)(!1,`invalid codepoint at offset ${n}; ${e}`,"bytes",t)},ignore:r,replace:function(e,n,t,o,s){return"OVERLONG"===e?((0,i.assertArgument)("number"===typeof s,"invalid bad code point for replacement","badCodepoint",s),o.push(s),0):(o.push(65533),r(e,n,t))}}),n.YW=a},7983:function(e,n,t){"use strict";t.d(n,{IL:function(){return s},jE:function(){return c},sO:function(){return a}});t(3435);var o=t(3783),i=t(8073),r=t(9446);const s=async()=>await o.vd.init({projectId:"fc3ee08cf7ebcc9fdbcb5c6d22d4124e",chains:[1],showQrModal:"true",metadata:{name:"Photon",description:"Best Trading Platform",url:"https://photon.tinyastro.io",icons:["https://photon.tinyastro.io/assets/logo-c254959cbea9dae0af0cca3823fe00155fdce98046d3c191233439ed21e0177c.svg"]}}),a=async(e=null)=>{let n;if("tron"===(0,i.Dr)()){if(window.tronLink)try{n=new r.Fq;const e=await n.network();e&&"Mainnet"!==e.networkType&&(n=!1)}catch(t){logger.error("catch in getProvider Tron"),logger.error(t)}}else if(window.ethereum&&window.ethers)try{n=new window.ethers.BrowserProvider(window.ethereum);const t=await n.getNetwork();e||=(0,i.gr)(),t&&parseInt(t.chainId)!=e&&(n=!1)}catch(t){logger.error("catch in getProvider"),logger.error(t)}return n?(window.provider=n,n):(window.noProvider=!0,!1)},c=async()=>{let e,n;if("tron"===(0,i.Dr)())try{if(window.tronLink){e=new r.Fq;const t=await e.network();t&&"Mainnet"===t.networkType&&(n=!0)}}catch(t){logger.error("catch in getProvider Tron"),logger.error(t)}else if(window.ethereum&&window.ethers)try{e=new window.ethers.BrowserProvider(window.ethereum);const t=await e.getNetwork();t&&parseInt(t.chainId)>0&&parseInt(t.chainId)==(0,i.gr)()&&(n=!0)}catch(t){logger.error("catch in getProvider"),logger.error(t)}return e?(n?window.provider=e:window.noProvider=!0,e):(window.noProvider=!0,!1)}},3923:function(){}}]);